Связи между таблицами:
1. **Один к одному**
2. **Многие к одному**
3. **Один ко многим**
4. **Многие ко многим**

*Основы нормализации бд*:
**Нормализация** - процесс организации данных в таблицах. Необходима для оптимального расхода памяти, изменение данных, согласованности данных. Третья форма является самым высоким уровнем. На практике разбиение на большое количество таблиц является целесообразным при частом изменении данных.

2 причины для процесса нормализации:
- выявление ненужных данных, например, хранение одних и тех же данных более, чем в одной таблице.
- Гарантирование того, что зависимости между данными имеют значение

**Первая нормальная форма**:
- Все атрибуты должны быть атомарными (т. е. не содержать списков, массивов или вложенных структур).
- В таблице не должно быть повторяющихся строк (записей).
- Должен быть определен первичный ключ, который уникально идентифицирует каждую запись.

**Вторая нормальная форма**:
- Должна быть выполнена 1NF.
- Все **неключевые атрибуты** должны **полностью зависеть** от **первичного ключа**.
- Если таблица имеет составной первичный ключ, то нельзя, чтобы часть этого ключа влияла только на часть данных (если такое есть — нужно выносить данные в отдельную таблицу).

**Третья нормальная форма**:
- Должна быть выполнена 2NF.
- **Не должно быть транзитивных зависимостей** (когда неключевые атрибуты зависят друг от друга, а не только от первичного ключа).
- Каждый неключевой атрибут должен зависеть **только** от первичного ключа.

**Иные формы**:
- Четвертая нормальная форма (BCNF):
	- Должна быть выполнена 3NF.
	- Каждый **детерминант** (атрибут, от которого зависят другие) должен быть **кандидатным ключом**.
	- Устраняются аномалии, когда один ключ частично определяет другой.
- Пятая нормальна форма - максимальное разбиение таблиц для избегания избыточности данных
	- Должна быть выполнена BCNF.
	- Таблица должна быть разложена так, чтобы можно было воссоздать исходные данные через соединение (JOIN), не порождая избыточность.
	- Часто применяется, когда данные содержат сложные связи многие-ко-многим.

## Пример нормализации

- *Первая нормальная форма*
❌ **Ненормализованная таблица (нет 1NF)**:

| ID  | Имя   | Телефон          |
| --- | ----- | ---------------- |
| 1   | Иван  | 111-222, 333-444 |
| 2   | Ольга | 555-666          |

✅ **Приводим к 1NF** (разбиваем многозначные атрибуты):

| ID  | Имя   | Телефон |
| --- | ----- | ------- |
| 1   | Иван  | 111-222 |
| 1   | Иван  | 333-444 |
| 2   | Ольга | 555-666 |

- *Вторая нормальная форма*

❌ **Нарушение 2NF** (данные о курсе зависят только от `Курс_ID`, а не от всего составного ключа):

|Студент_ID|Курс_ID|Название курса|Оценка|
|---|---|---|---|
|1|101|Математика|5|
|2|101|Математика|4|
|1|102|Физика|3|

✅ **Приводим к 2NF** (разносим данные в отдельные таблицы):

**Таблица "Оценки"**:

|Студент_ID|Курс_ID|Оценка|
|---|---|---|
|1|101|5|
|2|101|4|
|1|102|3|

**Таблица "Курсы"**:

| Курс_ID | Название курса |
| ------- | -------------- |
| 101     | Математика     |
| 102     | Физика         |

- *Третья нормальная форма*

❌ **Нарушение 3NF** (поле "Город" зависит от "Отдел_ID", а не от "Сотрудник_ID"):

|Сотрудник_ID|Имя|Отдел_ID|Отдел|Город|
|---|---|---|---|---|
|1|Иван|10|IT|Москва|
|2|Ольга|20|HR|Санкт-Петербург|

✅ **Приводим к 3NF** (выносим "Отдел" в отдельную таблицу):

**Таблица "Сотрудники"**:

|Сотрудник_ID|Имя|Отдел_ID|
|---|---|---|
|1|Иван|10|
|2|Ольга|20|

**Таблица "Отделы"**:

| Отдел_ID | Отдел | Город           |
| -------- | ----- | --------------- |
| 10       | IT    | Москва          |
| 20       | HR    | Санкт-Петербург |

- *Четвертая нормальная форма*

❌ **Нарушение BCNF** (у одного курса может быть несколько преподавателей и аудиторий, но преподаватель зависит только от курса):

|Курс|Преподаватель|Аудитория|
|---|---|---|
|Математика|Иван Петров|101|
|Математика|Ольга Иванова|102|

✅ **Приводим к BCNF** (разбиваем зависимости):

**Таблица "Курсы-Преподаватели"**:

|Курс|Преподаватель|
|---|---|
|Математика|Иван Петров|
|Математика|Ольга Иванова|

**Таблица "Аудитории"**:

| Курс       | Аудитория |
| ---------- | --------- |
| Математика | 101       |
| Математика | 102       |

- *Пятая нормальная форма*

❌ **Нарушение 5NF** (трёхсторонняя зависимость, таблица неразделена):

|Проект|Разработчик|Навык|
|---|---|---|
|CRM|Иван|Python|
|CRM|Иван|SQL|
|CRM|Ольга|Java|
|AI|Ольга|Python|

✅ **Приводим к 5NF** (разбиваем на три таблицы):

**Таблица "Проект-Разработчик"**:

|Проект|Разработчик|
|---|---|
|CRM|Иван|
|CRM|Ольга|
|AI|Ольга|

**Таблица "Разработчик-Навык"**:

|Разработчик|Навык|
|---|---|
|Иван|Python|
|Иван|SQL|
|Ольга|Java|
|Ольга|Python|

**Таблица "Проект-Навык"**:

| Проект | Навык  |
| ------ | ------ |
| CRM    | Python |
| CRM    | SQL    |
| CRM    | Java   |
| AI     | Python |
