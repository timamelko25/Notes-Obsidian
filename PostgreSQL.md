
```
sudo pacman -S postgresql
```

В результате будет установлен postgres и созданы группа и пользователь `postgres`.

для входа от имени postgres
```
sudo -iu postgres
```

инициализация кластера баз данных 
```
initdb --locale=ru_RU.UTF-8 --encoding=UTF8 -D /var/lib/postgres/data --data-checksums
```

установить автозапуск pg и запустить

создание бд

```
createdb названиеБд
```

выполнение команды от другого пользователя

```
sudo -u postgres 
```

`psql` - нативная консоль
`\c` - подключение к бд
`create database name` - создание бд
`\q` - выход из бд
`\l` - список всех бд
`\du` - вывод всех пользователей
`create user name` - создание нового юзера
`\password name` - указание пароля для пользователя 
`create user *name* with login password 'password'` - создание пользователя сразу с паролем
`drop user name` - удаление пользователя
`drop database name` - удаление бд

`psql db_name user_name` - войти бд определенным пользователем

`SELECT * FROM pg_catalog.pg_tables` - просмотр всех таблиц в текущем подключении
`\dt` - просмотр созданных схем

https://www.oslogic.ru/knowledge/598/shpargalka-po-osnovnym-komandam-postgresql/


Используется клиент-серверная архитектура.
Один экземпляр PostgreSQL одновременно работает с несколькими базами, которые вместе называется *кластером баз данных*

Для инициализации кластера:
```
initdb --locale=ru_RU.UTF-8 --encoding=UTF8 -D /var/lib/postgres/pgdata --data-checksums
```

При инициализации создаются 3 одинаковые бд:
- **template0** -  восстановление, например для восстановления из логической резервной копии или для создания базы в другой кодировке и никогда не должна меняться
- **template1** - служит шаблоном для всех остальных баз данных, которые может создать пользователь в этом кластере
- **postgres** - представляет собой обычную бд, которую можно использовать

Метаинформация обо всех объектов кластера хранятся в таблицах, относящихся к [системному каталогу][https://postgrespro.ru/docs/postgresql/16/catalogs]. В каждой бд имеется собственный набор таблиц описывающий объекты это конкретной базы. Все имена таблиц системного каталога начинаются с `pg_`. 

Схемы представляют собой пространства имен для всех объектов, хранящихся в бд. Кроме пользовательских, имеются специальные служебные:
- public - используется по умолчанию для пользовательских объектов, если не выполнены иные настройки
- pg_catalog - используется для таблиц системного каталога
- information_schema - дает альтернативное представление системного каталога, регламентируемое стандартом SQL.
- pg_toast - используется для объектов, относящихся к TOAST https://habr.com/ru/companies/postgrespro/articles/710104/
- pg_temp - объединяет временные таблицы