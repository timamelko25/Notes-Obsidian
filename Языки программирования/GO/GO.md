- [Введение](#%D0%92%D0%B2%D0%B5%D0%B4%D0%B5%D0%BD%D0%B8%D0%B5)
- [Создание модуля](#%D0%A1%D0%BE%D0%B7%D0%B4%D0%B0%D0%BD%D0%B8%D0%B5%20%D0%BC%D0%BE%D0%B4%D1%83%D0%BB%D1%8F)
	- [Инициализация модуля](#%D0%98%D0%BD%D0%B8%D1%86%D0%B8%D0%B0%D0%BB%D0%B8%D0%B7%D0%B0%D1%86%D0%B8%D1%8F%20%D0%BC%D0%BE%D0%B4%D1%83%D0%BB%D1%8F)
	- [Файл `go.mod`](#%D0%A4%D0%B0%D0%B9%D0%BB%20%60go.mod%60)
	- [Управление зависимостями](#%D0%A3%D0%BF%D1%80%D0%B0%D0%B2%D0%BB%D0%B5%D0%BD%D0%B8%D0%B5%20%D0%B7%D0%B0%D0%B2%D0%B8%D1%81%D0%B8%D0%BC%D0%BE%D1%81%D1%82%D1%8F%D0%BC%D0%B8)
	- [Файл `go.sum`](#%D0%A4%D0%B0%D0%B9%D0%BB%20%60go.sum%60)
- [Структура проекта](#%D0%A1%D1%82%D1%80%D1%83%D0%BA%D1%82%D1%83%D1%80%D0%B0%20%D0%BF%D1%80%D0%BE%D0%B5%D0%BA%D1%82%D0%B0)
- [Основные концепции](#%D0%9E%D1%81%D0%BD%D0%BE%D0%B2%D0%BD%D1%8B%D0%B5%20%D0%BA%D0%BE%D0%BD%D1%86%D0%B5%D0%BF%D1%86%D0%B8%D0%B8)
	- [Переменные и типы данных](#%D0%9F%D0%B5%D1%80%D0%B5%D0%BC%D0%B5%D0%BD%D0%BD%D1%8B%D0%B5%20%D0%B8%20%D1%82%D0%B8%D0%BF%D1%8B%20%D0%B4%D0%B0%D0%BD%D0%BD%D1%8B%D1%85)
	- [Функции](#%D0%A4%D1%83%D0%BD%D0%BA%D1%86%D0%B8%D0%B8)
	- [Управляющие конструкции](#%D0%A3%D0%BF%D1%80%D0%B0%D0%B2%D0%BB%D1%8F%D1%8E%D1%89%D0%B8%D0%B5%20%D0%BA%D0%BE%D0%BD%D1%81%D1%82%D1%80%D1%83%D0%BA%D1%86%D0%B8%D0%B8)
	- [Структуры и методы](#%D0%A1%D1%82%D1%80%D1%83%D0%BA%D1%82%D1%83%D1%80%D1%8B%20%D0%B8%20%D0%BC%D0%B5%D1%82%D0%BE%D0%B4%D1%8B)
	- [Интерфейсы](#%D0%98%D0%BD%D1%82%D0%B5%D1%80%D1%84%D0%B5%D0%B9%D1%81%D1%8B)
	- [Обработка ошибок](#%D0%9E%D0%B1%D1%80%D0%B0%D0%B1%D0%BE%D1%82%D0%BA%D0%B0%20%D0%BE%D1%88%D0%B8%D0%B1%D0%BE%D0%BA)
- [Коллекции](#%D0%9A%D0%BE%D0%BB%D0%BB%D0%B5%D0%BA%D1%86%D0%B8%D0%B8)
	- [Массивы](#%D0%9C%D0%B0%D1%81%D1%81%D0%B8%D0%B2%D1%8B)
	- [Срезы (Slices)](#%D0%A1%D1%80%D0%B5%D0%B7%D1%8B%20(Slices))
		- [Длина среза (len(s))](#%D0%94%D0%BB%D0%B8%D0%BD%D0%B0%20%D1%81%D1%80%D0%B5%D0%B7%D0%B0%20(len(s)))
- [Параллелизм](#%D0%9F%D0%B0%D1%80%D0%B0%D0%BB%D0%BB%D0%B5%D0%BB%D0%B8%D0%B7%D0%BC)
	- [Goroutines](#Goroutines)
	- [Каналы (Channels)](#%D0%9A%D0%B0%D0%BD%D0%B0%D0%BB%D1%8B%20(Channels))
	- [Мьютексы](#%D0%9C%D1%8C%D1%8E%D1%82%D0%B5%D0%BA%D1%81%D1%8B)
- [Дополнительные возможности](#%D0%94%D0%BE%D0%BF%D0%BE%D0%BB%D0%BD%D0%B8%D1%82%D0%B5%D0%BB%D1%8C%D0%BD%D1%8B%D0%B5%20%D0%B2%D0%BE%D0%B7%D0%BC%D0%BE%D0%B6%D0%BD%D0%BE%D1%81%D1%82%D0%B8)
	- [Флаги командной строки](#%D0%A4%D0%BB%D0%B0%D0%B3%D0%B8%20%D0%BA%D0%BE%D0%BC%D0%B0%D0%BD%D0%B4%D0%BD%D0%BE%D0%B9%20%D1%81%D1%82%D1%80%D0%BE%D0%BA%D0%B8)
	- [HTTP и мультиплексор](#HTTP%20%D0%B8%20%D0%BC%D1%83%D0%BB%D1%8C%D1%82%D0%B8%D0%BF%D0%BB%D0%B5%D0%BA%D1%81%D0%BE%D1%80)


## Введение

Go (или Golang) — это современный язык программирования, разработанный в Google. Он статически типизирован, компилируется в машинный код и известен своей простотой, высокой производительностью и удобством для создания многопоточных приложений. 

## Создание модуля

Модуль в Go — это основная единица организации кода. Он позволяет публиковать, версионировать, импортировать и управлять зависимостями приложения.

### Инициализация модуля

Чтобы начать работу, создайте модуль с помощью команды:

```bash
go mod init github.com/username/projectname
```

Пример с конкретным именем модуля:

```bash
go mod init github.com/hexlet/hello-hexlet
```

Эта команда создаёт файл `go.mod`, который содержит информацию о модуле и его зависимостях.

### Файл `go.mod`

Файл `go.mod` начинается с объявления имени модуля — уникального идентификатора, обычно совпадающего с адресом репозитория. Пример:

```go
module github.com/timamelko25/go_project

go 1.24.3
```

- `module` — путь к модулю, по которому он будет храниться в индексе модулей Go.
- `go` — минимальная версия языка, необходимая для сборки.
- Зависимости добавляются автоматически при импорте пакетов и указываются здесь же.

### Управление зависимостями

Для работы с зависимостями используются следующие команды:

- **Проверка и очистка**:
    
    ```bash
    go mod tidy
    ```
    
    Эта команда проверяет импорты в коде, загружает недостающие зависимости и удаляет неиспользуемые.
    
- **Просмотр версий пакета**:
    
    ```bash
    go list -m --versions github.com/sirupsen/logrus
    ```
    
    - `-m` — показывает только модули, а не отдельные пакеты.
    - `--versions` — выводит все доступные версии указанного пакета.
- **Установка конкретной версии**:
    
    ```bash
    go get github.com/sirupsen/logrus@v1.9.0
    ```
    

### Файл `go.sum`

После скачивания зависимостей появляется файл `go.sum`. Он содержит хэш-суммы для проверки целостности:

- Первая запись: название модуля, версия и хэш-сумма.
- Вторая запись: хэш-сумма файла `go.mod` зависимости.

Оба файла (`go.mod` и `go.sum`) обновляются при добавлении или удалении зависимостей.

## Структура проекта

Go не навязывает строгую структуру, но есть рекомендуемый подход, упрощающий поддержку кода:

- **bin** — скомпилированные двоичные файлы, готовые к развёртыванию.
- **cmd/api** — точка входа в приложение (функция `main`).
- **internal** — внутренние пакеты, недоступные для импорта извне.
- **migrations** — файлы миграций для базы данных.
- **remote** — конфигурации и сценарии для продакшн-сервера.
- **go.mod** — информация о зависимостях.
- **Makefile** — автоматизация задач: проверка кода, сборка, миграции.

Подробнее о стандартной структуре: [golang-standards/project-layout](https://github.com/golang-standards/project-layout/blob/master/README_ru.md).

## Основные концепции

### Переменные и типы данных

- **Объявление переменных**:
    
    ```go
    var i int
    var c, python, java bool
    ```
    
- **Инициализация**:
    
    ```go
    var t1, t2 = 5, 7
    ```
    
- **Короткая запись**:
    
    ```go
    v := 3.12
    ```
    
- **Константы**:
    
    ```go
    const Pi = 3.14
    ```
    

Go поддерживает базовые типы: `int`, `float64`, `bool`, `string` и другие, включая `byte` (алиас `uint8`) и `rune` (алиас `int32` для Unicode).

### Функции

- **Простая функция**:
    
    ```go
    func add(x int, y int) int {
        return x + y
    }
    ```
    
- **Упрощённая запись параметров**:
    
    ```go
    func add2(x, y int) int {
        return x - y
    }
    ```
    
- **Множественные возвращаемые значения**:
    
    ```go
    func swap(x, y string) (string, string) {
        return y, x
    }
    ```
    
- **Naked return** (для коротких функций):
    
    ```go
    func split(sum int) (x, y int) {
        x = sum * 4 / 9
        y = sum - x
        return
    }
    ```
    

### Управляющие конструкции

- **Цикл `for`** (единственный цикл в Go):
    
    ```go
    for i := 0; i < 3; i++ {
        sum += i
    }
    ```
    
- **Эквивалент `while`**:
    
    ```go
    for sum < 1000 {
        sum += sum
    }
    ```
    
- **Условный оператор `if`**:
    
    ```go
    func sqrt(x float64) string {
        if x < 0 {
            return sqrt(-x) + "i"
        }
        return fmt.Sprint(math.Sqrt(x))
    }
    ```
    
- **Оператор `switch`**:
    
    ```go
    switch os := runtime.GOOS; os {
    case "darwin":
        fmt.Println("macOS.")
    case "linux":
        fmt.Println("Linux.")
    default:
        fmt.Printf("%s.\n", os)
    }
    ```
    

### Структуры и методы

- **Объявление структуры**:
    
    ```go
    type Vertex struct {
        x int
        y int
    }
    ```
    
- **Метод**:
    
    ```go
    func (v Vertex) Abs() float64 {
        return math.Sqrt(float64(v.x*v.x + v.y*v.y))
    }
    ```
    
- **Конструкторы**:  
    В Go не принято создавать объекты структур в методах. Вместо этого используют функции-конструкторы с указателями:
    
    ```go
    func NewVertex(x, y int) *Vertex {
        return &Vertex{x, y}
    }
    ```
    
- **Приватность**:
    - Имена с заглавной буквы (например, `Abs`) — публичные.
    - Имена с маленькой буквы (например, `abs`) — приватные.

### Интерфейсы

Интерфейс — это набор методов, задающий стандартное поведение для типов:

```go
type Abser interface {
    Abs() float64
}
```

Тип автоматически реализует интерфейс, если содержит все его методы.

### Обработка ошибок

Ошибки в Go — это значения типа `error`:

```go
type error interface {
    Error() string
}
```

Пример:

```go
type ErrNegativeSqrt float64

func (e ErrNegativeSqrt) Error() string {
    return fmt.Sprintf("cannot Sqrt negative number: %v", float64(e))
}

func Sqrt(x float64) (float64, error) {
    if x < 0 {
        return 0, ErrNegativeSqrt(x)
    }
    return math.Sqrt(x), nil
}
```

## Коллекции

### Массивы

Массивы имеют фиксированный размер:

```go
var a [2]int
a[0] = 1
a[1] = 123
```

### Срезы (Slices)

Срезы — динамические представления массивов:

```go 
primes := [6]int{2, 3, 5, 7, 11, 13} 
s := primes[1:4] // [3 5 7] 
```

#### Длина среза (len(s))

- **Определение**: Количество элементов, доступных в срезе.
    
- **Получение**: len(s)
    
- **Пример**:
    
    ```go
    primes := [6]int{2, 3, 5, 7, 11, 13}
    s := primes[1:4] // [3, 5, 7]
    fmt.Println(len(s)) // 3
```
    
- **Изменение**:
    
    - Увеличение: append(s, elem)
        
    - Уменьшение: s = s[:2]
        

#### Вместимость среза (cap(s))

- **Определение**: Максимальное количество элементов, которое срез может содержать без перераспределения памяти.
    
- **Получение**: cap(s)
    
- **Пример**:
    
    ```go
    s := primes[1:4] // [3, 5, 7], cap = 5
    fmt.Println(cap(s)) // 5
    ```
    
- **Управление**:
    
    - При append, если len(s) < cap(s), базовый массив не меняется.
        
    - При len(s) == cap(s), Go выделяет новый массив.
        

#### Взаимосвязь

- **Условие**: len(s) <= cap(s)
    
- **Пример**:
    
    ```go
    s := primes[1:4] // len=3, cap=5
    s = append(s, 11) // len=4, cap=5
    s = append(s, 13) // len=5, cap=5
    s = append(s, 17) // len=6, cap=10 (новый массив)
    ```
    

#### Управление срезами

- **Создание**: make([]int, 3, 5)
    
- **Увеличение длины**: append(s, elem)
    
- **Уменьшение длины**: s = s[:3]

### Карты (Maps)

Карты хранят пары ключ-значение:

```go
m := make(map[string]Vertex)
m["Bell Labs"] = Vertex{40, -74}
```

- `delete(m, "Bell Labs")` — удаляет элемент.
- `elem, ok := m["Bell Labs"]` — проверяет наличие ключа.

## Параллелизм

### Goroutines

Goroutines — это легковесные потоки:

```go
go say("world")
say("hello")
```

### Каналы (Channels)

Каналы используются для обмена данными между goroutines:

```go
c := make(chan int)
go sum(s[:len(s)/2], c)
x := <-c
```

### Мьютексы

Мьютексы синхронизируют доступ к данным:

```go
type SafeCounter struct {
    mu sync.Mutex
    v  map[string]int
}

func (c *SafeCounter) Inc(key string) {
    c.mu.Lock()
    c.v[key]++
    c.mu.Unlock()
}
```

## Дополнительные возможности

### Флаги командной строки

Библиотека `flag` позволяет парсить аргументы:

```go
import "flag"

func main() {
    wordPtr := flag.String("word", "foo", "a string")
    flag.Parse()
    fmt.Println(*wordPtr)
}
```

### HTTP и мультиплексор

Стандартный `http.ServeMux` маршрутизирует запросы:

```go
mux := http.NewServeMux()
mux.HandleFunc("/v1/healthcheck", healthCheckHandler)
http.ListenAndServe(":8080", mux)
```

Ограничения: не поддерживает методы (GET, POST) и параметры в URL (например, `/v1/books?id=1`).
