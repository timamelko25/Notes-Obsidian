```table-of-contents
title: 
style: nestedList # TOC style (nestedList|nestedOrderedList|inlineFirstLevel)
minLevel: 0 # Include headings from the specified level
maxLevel: 0 # Include headings up to the specified level
includeLinks: true # Make headings clickable
hideWhenEmpty: false # Hide TOC if no headings are found
debugInConsole: false # Print debug info in Obsidian console
```
**CDN** (**Content** **Delivery** **Network**) - это географически распределённая сетевая инфраструктура, обеспечивающая быструю доставку контента пользователям веб-сервисов и сайтов. Входящие в состав CDN cерверы географически располагаются таким образом, чтобы сделать время ответа для пользователей сайта/сервиса минимальным.

**Ориджин (origin)** — сервер, на котором хранятся исходные файлы или данные, раздаваемые через CDN.  
  
**PoP (point of presence, точка присутствия)** — кэширующий сервер в составе CDN, расположенный в определенной географической локации. Для обозначения таких серверов также используется термин edge.  
  
**Динамический контент** ― контент, генерируемый на сервере в момент получения запроса (либо изменяемый пользователем, либо загружаемый из базы данных).  
  
**Статический контент** ― контент, хранимый на сервере в неизменяемом виде (например, бинарные файлы, аудио- и видеофайлы, JS и CSS).

**Сетевая топология** - конфигурация графа, вершинами которого соответствуют конечные узлы сети (компьютеры) и коммуникационное оборудование (маршрутизаторы), а ребрами физические или информационные связи между вершинами
 
![[Pasted image 20250213020132.png]]

# Виды сетевой топологии:
- физическая - описывает реально расположение и связи между узлами сети
- логическая - описывает хождение сигнала в рамках физической топологии
- информационной - описывает направление потоков информации, передаваемой по сети
- управление обменом - принцип передачи права на пользование сетью

Топологии:
- **полносвязная**

![[Pasted image 20250213022126.png]]
- **неполносвязная**
	- *шина*
	- ![[Pasted image 20250213022409.png]]
	- *звезда*
	- ![[Pasted image 20250213022415.png]]
	- *кольцо*
	- ![[Pasted image 20250213022420.png]]
- **ячеистая топология** - Получается из полносвязной топологии путём удаления некоторых связей. Допускает соединения большого количества компьютеров и характерна для крупных сетей.
- **смешанная топология**
- ![[Pasted image 20250213022443.png]]

Вспомогательное устройство для топологии _звезды_:
- **концентратор** (старое) - объединение компьютеров с применением кабельной инфраструктуры типа витая пара (патч корд) - работает на физическом уровне сетевой модели OSI
- **коммутатор** (свитч) - работает на втором канальном  уровне OSI

## Как происходит запрос в гугл?

![[Pasted image 20250213024204.png]]

Идет запрос к провайдеру, от провайдера к его родительскому и тд
Множество провайдеров объединены через хабы - точки обмена трафиком

![[Pasted image 20250213024541.png]]

**Точки обмена трафиком** - сетевая инфраструктура предназначенная для оперативной организации соединений и межоператорского обмена сетевым трафиком между независимыми сетями в Интернете. Участниками обмена трафиком обычно являются организации, управляющие независимыми сетями.
**Пиринг** - соглашение интернет-операторов об обмене трафиком между своими сетями, а также техническое взаимодействие, реализующее данное соглашение: соединение сетей и обмен информацией о сетевых маршрутах по протоколу [BGP](https://ru.wikipedia.org/wiki/Border_Gateway_Protocol "Border Gateway Protocol")(https://ru.wikipedia.org/wiki/%D0%9F%D0%B8%D1%80%D0%B8%D0%BD%D0%B3#cite_note-1).

Интернет построен на коммутации пакетов. Коммутация пакетов - способ динамического распределения ресурсов сети связи за счёт передачи и коммутации оцифрованной информации в виде частей небольшого размера.

**Протокол** - набор правил определяющий как узлы сети должны передавать данные друг другу. 

Пример высокоуровневых протоколов: **HTTP**, **SSH**, **IMAP**, **DHCP**, **DNS**, **SMTP**, **POP3**, **Telnet**, **FTP**, **TFTP**

# Модели описывающие уровни протоколов:
- ***OSI*** (Open System Interconnection) - теоретическая
- ***TCP/IP*** (Transmission Control Protocol / Internet Protocol) - практическая

## OSI
7 уровней работают снизу вверх 

![[Pasted image 20250213141404.png]]

1. **Физический уровень** - определяет метод передачи данных, какая среда используется (передача электрических сигналов), уровень напряжения, метод кодирования двоичных сигналов.
2. **Канальный уровень** - задача адресации в пределах локальной сети, обнаруживает ошибки, проверяет целостность данных. (MAC - адрес, протокол Ethernet). Передаваемая информация - кадры.
3. **Сетевой уровень** - объединение участков сети и выбор оптимального пути (маршрутизация). Каждое устройство должно иметь уникальный сетевой адрес в сети. (протоколы IPv4 IPv6)
4. **Транспортный уровень** - передача сегментов файлов, порты, протоколы TCP, UDP. Информация транспортного называется сегменты. Применимо только для TCP, для UDP - датаграмма. Разница в названии не критична.
5. **Сеансовый уровень** - установление, управление и разрыв соединений между хостами. виде. Передаваемая информация обозначается как PDU (Protocol Data Units)
6. **Уровень представления** - структурирование информации в читабельный вид для прикладного уровня. виде. Передаваемая информация обозначается как PDU (Protocol Data Units)
7. **Прикладной уровень** - вывод информации пользователю в понятном виде. Передаваемая информация обозначается как PDU (Protocol Data Units)

Все процессы строго проходят друг за другом. С верхнего на нижний инкапсуляция, с нижнего на верхний деинкапсуляция. 

## TCP/IP

![[Pasted image 20250213143620.png]]

### Уровни
1. Application Layer (прикладной уровень)
2. Transport Layer (транспортный уровень)
3. Network Layer (сетевой уровень)
4. Link Layer (канальный уровень)


### Общая схема передачи.
1. Генерируется сообщение на уровне приложения 
2. Передача на транспортный уровень, добавляется TCP/UDP заголовок. Заголовок хранит в себе информацию о портах, нагрузке и тд. Получается датаграмма или сегмент
3. Передача на межсетевой уровень. Добавляется IP-заголовок. Заголовок содержит в себе адреса компьютеров, на которых запущено приложение. Результат объединения сегмента и IP-заголовка называется пакетов.
4. Передача на канальный уровень. Протоколы добавляют свои заголовки и в результате получается кадр. Кадр обычно содержит в себе не только заголовок, но и окончание

![[Pasted image 20250213144821.png]]

Когда кадр передаётся от одного промежуточного узла сети к другому, эти узлы разбирают кадр на части, проверяют IP-заголовок пакета, определяют что с ним делать, а затем создают новый кадр для этого пакета и передают его следующему узлу.

![[Pasted image 20250213144858.png]]

Самые важные транспортные протоколы TCP (Transmission Control Protocol), UDP (User Datagram Protocol)

Протоколы транспортного уровня используются для адресации пакетов с порта приложения отправителя на порт приложения получателя

# Высокоуровневых протоколы
## HTTP (HyperText Transport Protocol)
Протокол передачи данных, обычно используется для получения веб информации. Используется "клиент-серверная" модель (клиент формирует и отправляет запрос, сервер слушает запросы и отвечает на них). Клиент - браузер (Firefox, Google Chrome ...), сервер (используемое ПО: apache, nginx, IIS). Используются версии HTTP/2, HTTP/1.1.
Данные между клиентом и сервером передаются с помощью HTTP-сообщений:
- **Запросы (HTTP Requests)** — сообщения, которые отправляются клиентом на сервер, чтобы вызвать выполнение некоторых действий. Зачастую для получения доступа к определенному ресурсу. Основой запроса является HTTP-заголовок.
- **Ответы (HTTP Responses)** — сообщения, которые сервер отправляет _в ответ_ на клиентский запрос.
### Структура запросов
Для запросов и ответов структура совпадает
1. **Стартовая строка (start line)** - описание версии, используемый протокол, запрашиваемый ресурс, код ответа, занимает одну строку
	*Методы HTTP-запроса*:
		- GET
		- POST
		- HEAD - возвращает заголовок и тело
		- PUT
		- DELETE
		- OPTIONS - получение информации о сервере, допустимой информации
		- PATCH
	*Цель запроса*: указатель ресурса URL (Iniform Resource Locator) (состоит из протокола, доменного имени (или IP-адреса), пути к конкретному ресурсу на сервере). Дополнительно может содержать порт, несколько параметров, опциональные элементы
	*Версия HTTP*: 
	- 1.1 недостатки:
		- заголовки не сжаты
		- заголовки совпадали и повторно отправлялись
		- отсутствие мультиплексирования - механизм объединения нескольких соединений в одном потоке данных
	- 2 - сообщения разбиваются на фреймы. Фреймы данных (тела сообщения) отделялись от фреймов заголовка, что позволило применять сжатие. Вместе с появлением потоков появился и ранее описанный механизм мультиплексирования — теперь можно было обойтись одним соединением для нескольких потоков. Работает с сырой двоичной формой данных
	![[Pasted image 20250220013155.png]]
2. HTTP-заголовки (HTTP Headers) - строки текста для уточнения запроса/описание содержимого тела сообщения
Структура key:value
	Категории заголовков:
		- Общего назначения - применяются ко всему сообщению целиком
		- Заголовки запроса - уточняют информацию о запросе, сообщая доп. контекст или ограничивая его некоторыми  логическими условиями
		- Заголовки представления - описывают формат данных сообщения и используемую кодировку. Передается при наличии тела.
1. Пустая строка - сообщение, что все метаданные для конкретного запроса или ответа были отправлены
2. Тело сообщения (опционально) - данные, связанные с запросом/документ передаваемый в ответе

![[Pasted image 20250220013832.png]]

URL: 
- *Scheme* (обязательно) - указание протокола, сопровождается `://`
- *Host* (обязательно) - местоположение ресурса, может быть как доменное имя, так и IP-адрес
- *Port* (по умолчанию 80 для http://, 443 https://)
- Path
- Query String (?key=value&key=value...)

### Примеры заголовков запроса:
- Host
- User-Agent - описание клиента, который запрашивает ресурс. информация о пользовательском окружении
- Refer - откуда поступил текущий запрос
- Accept - принимающий тип медиафайлов у клиента 
- Cookie -  формат cookie=value. Куки представляют собой небольшие фрагменты данных, которые хранятся как на стороне клиента, так и на сервере, и выступают в качестве идентификатора. Куки передаются вместе с запросом для поддержания доступа клиента к ресурсу.
- Authorization - метод идентификации клиента на сервере. После успешной идентификации сервер возвращает токен, уникальный для каждого конкретного клиента. В отличие от куки, данный токен хранится исключительно на стороне клиента и отправляется клиентом только по запросу сервера.

### Примеры заголовков ответа:
- Server - Server: nginx - информация о сервере, который обработал запрос
- Set-Cookie - Set-Cookie:PHPSSID=bf42938f - Содержит куки, требуемые для идентификации клиента. Браузер парсит куки и сохраняет их в своем хранилище для дальнейших запросов.
- **WWW-Authenticate** - WWW-Authenticate: BASIC realm=»localhost» - Уведомляет клиента о типе аутентификации, который необходим для доступа к запрашиваемому ресурсу.

### HTTPS 
Расширение HTTP протокола путем объединения HTTP и SSL или HTTP и TLS
Протоколы TLS (Transport Layer Security), SSL (Secure Socket Layer) - криптографические. Позволяют шифровать данные, в данном случае между браузером и сервером.
! TLS основан на SSL, но второй устарел и используется TLS

Перед тем как запустить HTTP-соединение, браузер обращается к серверу, чтобы наладить защищенное соединение. Сервер отправляет копию сертификата безопасности в ответ.

Браузер проверяет данные по своим спискам доверенных центров (список есть в каждом браузере), проверяет совпадение CN с доменным именем, даты выпуска и срока окончания сертификата, отсутствие в CRL, поддерживаемые алгоритмы, наличие издателя в списке доверенных корневых сертификатов и в списке доверенных издателей. В случае проблем на любой из этих проверок сертификат считается невалидным.

Если все хорошо, то браузер считает ресурс безопасным: они выбирают алгоритм шифрования, обмениваются ключом шифрования и потом данными по протоколу HTTP.

![[Pasted image 20250220154901.png]]

Типы SSL/TLS сертификатов: (от небезопасный к безопасным)
- Самоподписанные
- Групповые - CloudGlare, Let\`s Encrypt 
- Подписанные доверенным центром сертификации

Сертификаты по уровню проверки и организации в HTTPS
- Domain validation
- Organization Validation
- Extended Validation

## DNS (Domain Name System)
Система доменных имен - используется для преобразования доменного имени в IP-адрес и обратно. Состоит из множества DNS-серверов, на которых хранится информация о соответствии доменных имен и IP-адресов. Работает от домена третьего уровня к первому

Приоритетные IP-адреса хранятся в файле `hosts`

### Типы записей DNS-сервера
В DNS есть специальные файлы, которые хранят связи между доменами и их IP-адресами. Также они хранят информацию о поддоменах, почтовых серверах. Это все - **DNS-зона**.
Типы записей:
- A - IP-адрес обычного сайта
- MX - адрес почтового сервера
- CNAME - запись для поддоменов, которая указывает, к каким адресам прикреплен основной домен.
- NS - адрес сервера, где находятся все ресурсные записи
- TXT - текстовая информация для конкретного домена
- SPF - список серверов, которые могут отправлять сообщения от имени указанного домена
- SOA - главная запись зоны, где указаны все сведения о сервере
## POP3 (Post Office Protocol Version 3)
Протокол почтового отделения версии 3.
## IMAP (Internet Message Access Protocol)
Протокол доступа к электронной почте.
## SMTP (Simple Mail Transfer Protocol)
Простой протокол передачи почты.

## Telnet (Terminal Network)
Telnet (telecommunications network) — это сетевой протокол (работающий по TCP-соединению), предназначенный для ручного управления удаленными машинами с помощью команд консольного терминала.

С помощью Telnet команды вводятся на локальной машине, а выполняются на удаленной. То есть пользователь сперва вводит IP-адрес и порт (по умолчанию 23) удаленного сервера, после чего выполняет команды на нем.

Старее SSH, в большей степени уязвим к перехватам. Используется текстовая авторизация

## SSH (Secure Shell)
**SSH** — это протокол прикладного уровня для безопасного обмена информацией между двумя устройствами. При передаче по SSH информация шифруется, поэтому протокол используется для работы в незащищенных сетях, чтобы обеспечить высокий уровень защиты. К частыми сценариями его использования можно отнести работу с удаленными машинами и передачу файлов на устройства.

Работа SSH-протокола базируется на нескольких этапах:
- открытие транспортного канала аутентификации - используется TCP-соединение
- аутентификация
- подключение - после установки соединения происходит обмен данных о версии протокола, тип шифрования, метод обмена ключами, алгоритмы сжатия данных и тд. 

![[Pasted image 20250221140438.png]]

Типы применяемый ключей:
- симметричные - для шифрования и дешифрования информации используется один и тот же ключ
- ассиметричные - для шифрования и дешифрования информации используется приватный (защищенный, для дешифрования) и публичный (незащищенный, передаваемый для шифрования) ключи. Приватный хранится на устройстве, а публичный распространяется между устройствами, с которыми устанавливается соединение

При одинаковой длине симметричного и асимметричного ключей криптостойкость первого будет выше криптостойкости второго. Это влияет на расходы при обмене информацией: снижение длины ключа ведет к снижению требований к оборудованию для шифрования. 

**Криптостойкость** — это свойство, измеряемое совокупностью количества действий и затраченных ресурсов для расшифровки сообщения без наличия ключа, проще говоря это количество ресурсов затраченных на подбор ключа.

При работе SSH-соединения взаимодействие происходит гибридно: ассиметричный для установки соединения, а симметричный (сеансовый) для последующего шифрования данных. Сеансовый ключ можно менять во время или после передачи определенного количества трафика.

Как происходит выбор сеансового ключа:
1. Сервер высылает свой публичный ассиметричный ключ
2. Клиент случайным образом выбирает сеансовый ключ
3. Клиент шифрует сеансовый ключ с помощью публичного, который получен от сервера, и передает его на сервер
4. С помощью приватного асимметричного ключа сервер расшифровывает сеансовый, который получен от пользователя
5. Далее при обмене данными используется сеансовый ключ до момента его обновления, когда алгоритм повторяется заново

При подключении к серверу каждый ключ обладает уникальной контрольной суммой (отпечатком/*fingerprint*) что не дает возможности другому пользователю авторизоваться под другим пользователем. 

## FTP (File Transfer Protocol)
Протокол передачи файлов.

## TFTP (Trivial File Transfer Protocol)


# Протоколы транспортного уровня
## UDP (User Datagram Protocol)
Используется для "связи без установки соединения" (connectionless communication). Один узел сети отсылает пакеты, адресуя их другому узлу. Отправитель не ждет подтверждения о том, что получатель принял предыдущие пакеты.

Заголовок UDP-пакета состоит из 8 байт:
- порт отправителя
- порт получателя
- длина датаграммы
- контрольная сумма

![[Pasted image 20250213150131.png]]


## TCP (Transmissin Control Protocol)
Между клиентом и сервером происходит соединение для проверки доставки пакетов. Перед отправкой данных сервер и клиент должны установить соединение - рукопожатие.

Рукопожатие происходит в 3 этапа:
1. Клиент посылает сервер пакет SYN
2. Сервет отвечает пакетов SYN-ACK
3. Клиент отвечает серверу пакетов ACK

![[Pasted image 20250213152351.png]]

Для завершения рукопожатия используется флаг FIN, возможно использование RST.

Решаемые задачи во время передачи данных:
- сегменты доставлены в нужном порядке
- сегменты доставлены
- контроль потока пакетов, для избегания перегрузки узлов сети 

Заголовок TCP минимум 20 байт:
- порт отправителя
- порт получателя
- порядковый номер (Sequence number) - сколько данных отправитель послал в сторону получателя. Номер увеличивается на 1 каждый раз, когда отправитель посылает пакеты с флагом SYN, FIN, так же увеличивается на размер полезных данных если они были переданы. Число, указанное в номере не учитывает текущий пакет. Порядковый номер первого пакета, посылаемого клиентом, всегда равен 0. 
- номер подтверждения (Acknowledgement number) - показывает сколько данных отправитель этого пакета получил на текущий момент. Отзеркаливает порядковый номер на 1 больше. Первый пакет всегда равен 1.
- длина заголовка
- флаги - названия пакетов для установки рукопожатия
- размер окна
- контрольная сумма
- указатель важности
- дополнительные опции

![[Pasted image 20250213150832.png]]

# Сетевой уровень
MAC IP ICMP ARP
Межсетевой уровень используется, чтобы описать обеспечение такого взаимодействия.

Межсетевое взаимодействие — это основной принцип построения интернета. Локальные сети по всему миру объединены в глобальную, а передачу данных между этими сетями осуществляют магистральные и пограничные маршрутизаторы.

## IP (Internet Protocol)

Описывает правила адресации и межсетевое взаимодействие устройств. Ключевая особенностью протокола является адресация.
IP адрес - уникальный составной числовой идентификатор. Числовой идентификатор состоит из адреса сети и адреса узла этой сети.

Существует две версии IP - IPv4, IPv6. Четвертая версия выделяет под адрес 4 байта (32 бита), что позволяет работать 4 миллиардам устройств. Для увеличения числа устройств был разработан IPv6, где под адрес выделяется 8 байт (128 бит)

### IPv4
IPv4: адрес представляется в виде четырех десятичных чисел значениями от 0 до 255
Пример: 192.168.0.3

IPv6: адрес представляется в виде восьми четырехзначных шестнадцатеричных чисел (от 0 до F). Ведущие нули опускаются. Нулевые группы идущие подряд, могут быть опущены, но не более одного пропуска. Каждое число разделенное точками называют хекстетом.
Пример: 2001:0db8:85a3:0000:0000:8a2e:0370:7334

Каждый рязряд называется октетом. Максимальное число в октете 255, минимальное 0.

У всех IP адресов есть две части: сеть и узел.

- **_Сеть_** – это та часть IP, которая не меняется во всей сети и все адреса устройств начинаются именно с номера сети.
- **_Узел_** – это изменяющаяся часть IP. Каждое устройство имеет свой уникальный адрес в сети, он называется узлом.

IP адрес не может существовать без маски подсети.
Маска подсети - двоичное число, при поразрядном выполнении логической операции `и` отображает адрес сети

Все единицы в маске могут идти только последовательно. Маску могут указывать через слеш в виде количества единиц, которые записываются слева-направо, например 192.168.0.1/16. Такая запись называется **префиксной**. 

По количеству нулей в маске можно понять, сколько устройств может работать в сети. Для этого нужно возвести двойку в степень равную количеству нулей.

Нужно учитывать, что у каждой сети есть два зарезервированных адреса - broadcast (самый последний адрес) и, собственно, сам адрес сети. Их нужно исключать из найденного ранее числа.

![[Pasted image 20250221184102.png]]

### Частные IP-диапазоны
Все адреса делятся:
- публичные/глобальные/внешние (белые) - используются в сети Интернет
- частные/локальные/внутренние (серые) - используются в локальной сети
Серые адреса используются в закрытых локальных сетях. Выход в интернет, используя частный IP-адрес, невозможно. В этом случае связь с Интернетом осуществляется через NAT (Network Address Translator) трансляция сетевых адресов заменяет частный IP-адрес на публичный.
Частные IP-адреса в пределах одной локальной сети должны быть уникальны и не могут повторяться.

- От 10.0.0.0 до 10.255.255.255 с маской 255.0.0.0 или /8
- От 172.16.0.0 до 172.31.255.255 с маской 255.240.0.0 или /12
- От 192.168.0.0 до 192.168.255.255 с маской 255.255.0.0 или /16
- От 100.64.0.0 до 100.127.255.255 с маской подсети 255.192.0.0 или /10; данная подсеть рекомендована согласно rfc6598 для использования в качестве адресов для CGN (Carrier-Grade NAT).

### Глобальные IP-адреса
Глобальные адреса называются белыми, выдаются в аренду.

Провайдер выдает на время (при каждом подключении к сети) временный IP-адрес. Для разворачивания сайта на сервере для глобального адреса необходим глобальный адрес. Для получения необходим интернет-провайдер, провайдер обращается к локальному Интернет регистратору (LIR - Local Internet Registry), который выдает набор IP адресов провайдеру, провайдер из списка выделяет один адрес. LIR обращается за адресами к RIR (Regional Internet Registry), RIR к IANA (Internet Assigned Numbers Authority), IANA к ICANN (Internet Corporation for Assigned Names and Numbers)

### NAT (Network Address Tranlator)
Механизм в TCP/IP преобразовывающий локальный адрес в глобальный. Устройство, которое отвечает за NAT, хранит в себе бд сопоставления адресов. Обычно, задачами NAT занимается маршрутизатор.
![[Pasted image 20250221195934.png]]

Кадр IP-протокола
![[Pasted image 20250221212836.png]]

Структура:
1. Версия IPv4/IPv6
2. IHL (Internet Header Length - размер заголовка)
3. Тип обслуживания - обслуживает размер очередей QoS (Quality of Service). Происходит при помощи байта, который указывает на определенный набор критериев (требование ко времени задержки, пропускной способности, надежности)
4. Длина пакета - Размер пакета. Если **IHL** отвечает только за размер полей в заголовке (заголовком являются все поля на картинке, кроме поля данных), то длина пакета отвечает за весь пакет в целом, включая пользовательские данные.
5. Время жизни (TTL - time to live) - используется для предотвращения циклического пути пакета. При прохождении через маршрутизатор, значение уменьшается на единицу, и когда достигает нуля, пакет отбрасывается.
6. Протокол - указание транспортного протокола
7. Контрольная сумма заголовка - считается целостность полей заголовка, ! не данных
8. Опции - используется для расширения стандартного заголовка IP
9. Смещение - Указывает, какому месту принадлежит фрагмент в оригинальном IP. Это значение всегда кратно восьми байтам.
10. Данные
11. Идентификатор - Это 4-х байтовое число, которое показывает, что все части разделенного пакета одно единое целое.
12. Флаги - Указывает, что это не единый, а фрагментированный пакет.
13. Смещение фрагмента - Сдвиг относительно первого фрагмента. То есть это нумерация, которая поможет собрать IP-пакет воедино.
14. IP-адрес отправителя и IP-адрес получателя


## ICMP (Internet Control Message Protocol)
протокол, предназначенный для отправки сообщений об ошибках и передачи служебной информации, которая указывает на успех или неудачу при обмене данными с другим IP-адресом. Обычно ICMP не используется для передачи данных между устройствами, а применяется для проверки связи между двумя хостами с помощью программ, таких как ping или traceroute

Заголовок ICMP идет после заголовка IPv4 и идентифицируется как протокол 1. ICMP-пакеты содержат 8-битный заголовок и данные переменного размера. Поле Type указывает на тип пакета. Если значение равно 8 это запрос ICMP echo (ping), если 0 — ответ ICMP echo (ping).

![[Pasted image 20250221220337.png]]

## ARP (Address Resolution Protocol)
предназначен для определения MAC-адреса другого компьютера по известному IP
![[Pasted image 20250221220217.png]]

## DHCP (Dynamic Host Confuguration Protocol)
DHCP — протокол прикладного уровня модели TCP/IP, служит для назначения IP-адреса клиенту. IP-адрес можно назначать вручную каждому клиенту, то есть компьютеру в локальной сети. Но в больших сетях это очень трудозатратно, к тому же, чем больше локальная сеть, тем выше возрастает вероятность ошибки при настройке. Поэтому для автоматизации назначения IP был создан протокол DHCP.

[DHCP-протокол: что это такое и как он работает](https://selectel.ru/blog/dhcp-protocol/)

# Канальный уровень
Задает параметры сигнала, а также какой вид и форму имеет сигнал. Вводится понятие - фреймы (биты). Единица измерения передаваемой информации.
Для передачи используется Ethernet, Wi-Fi, Bluetooth

Ещё одна важная задача канального уровня — проверять, что данные передаются безошибочно. Для этого протоколы используют свои средства проверки:

- Если возникла ошибка, устройство отправляет фрейм обратно, а второе устройство передаёт его ещё раз.
- Если всё прошло удачно, то фрейм передаётся на следующий уровень для обработки.
## Ethernet протокол
Все версии стандарта начинаются с 802.3
Кадр (PDU) Ethernet
![[Pasted image 20250221211728.png]]

1. Преамбула - используется для указания начала кадра
2. MAC-адрес получателя - записывается адрес получателя
3. MAC-адрес отравителя - записывается адрес отправителя
4. Тип (длина) - указывается вышестоящий протокол Ipv4 - 0x0800 IPv6 - 0x86DD ARP - 0x0806
5. SNAP/LLC - данные полученные с высших уровней или полезные данные
6. FCS (Frame Check Sequence - контрольная сумма кадра) - подсчитана чек-сумма

На уровне используется MAC-адресация

MAC (Media Access Control) - часть уровня, которая отвечает за обеспечение доступа к линиям связи и адресацией хостов (конечных узлов). Отвечает за множественный доступ к сети. Использует топологии *шина*, *кольцо*.Из сетевого оборудования - концентратор (хаб).

MAC-адрес - уникальный идентификатор - шестибайтовый номер, записывается в виде шестнадцатеричного числа. 3 старших байта (24 бита) отводится как идентификатор организации (OUI). Организация запрашивает OUI у IEEE Registration Authority. Оставшиеся 3 байта (24 бита) отводятся под идентификацию выпускаемых устройств. Всегда состоит из 12 букв и/или цифр. Есть возможность изменить MAC-адрес в реестре. 
Пример: 00-50-B6-5B-CA-6A